{
    "sourceFile": "app/dashboard/setting/page.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1767031851260,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1767031851260,
            "name": "Commit-0",
            "content": "\"use client\";\n\nimport React, { useState, useEffect } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport {\n  Save,\n  User,\n  Store,\n  Clock,\n  Bell,\n  Lock,\n  Loader2,\n  Camera,\n  ChevronRight,\n  LogOut,\n} from \"lucide-react\";\n// Firebase\nimport { auth, db } from \"@/services/firebase\";\nimport { onAuthStateChanged, signOut } from \"firebase/auth\";\nimport { doc, getDoc, updateDoc } from \"firebase/firestore\";\n\nexport default function SettingsPage() {\n  const router = useRouter();\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [barberiaData, setBarberiaData] = useState(null);\n\n  // Carga de datos iniciales\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, async (user) => {\n      if (user) {\n        const docRef = doc(db, \"barberias\", user.uid);\n        const docSnap = await getDoc(docRef);\n        if (docSnap.exists()) {\n          setBarberiaData(docSnap.data());\n        }\n        setLoading(false);\n      } else {\n        router.push(\"/login\");\n      }\n    });\n    return () => unsubscribe();\n  }, [router]);\n\n  const handleUpdateSettings = async (e) => {\n    e.preventDefault();\n    setSaving(true);\n    try {\n      const barberiaRef = doc(db, \"barberias\", auth.currentUser.uid);\n      await updateDoc(barberiaRef, barberiaData);\n      alert(\"Configuración actualizada correctamente\");\n    } catch (error) {\n      console.error(error);\n      alert(\"Error al guardar los cambios\");\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleLogout = async () => {\n    await signOut(auth);\n    router.push(\"/login\");\n  };\n\n  if (loading) return (\n    <div className=\"h-screen flex items-center justify-center bg-white dark:bg-slate-950\">\n      <Loader2 className=\"text-blue-600 animate-spin\" size={40} />\n    </div>\n  );\n\n  return (\n    <div className=\"min-h-screen bg-slate-50 dark:bg-slate-950 p-6 md:p-12\">\n      <div className=\"max-w-4xl mx-auto\">\n        <header className=\"mb-10 flex justify-between items-end\">\n          <div>\n            <h1 className=\"text-4xl font-black uppercase tracking-tighter dark:text-white\">Configuración</h1>\n            <p className=\"text-slate-500 font-bold uppercase text-[10px] tracking-widest mt-2\">Gestiona tu negocio y preferencias</p>\n          </div>\n          <button \n            onClick={handleLogout}\n            className=\"flex items-center gap-2 text-red-500 font-black uppercase text-[10px] tracking-widest hover:bg-red-50 dark:hover:bg-red-500/10 px-4 py-2 rounded-xl transition-all\"\n          >\n            <LogOut size={16} /> Cerrar Sesión\n          </button>\n        </header>\n\n        <form onSubmit={handleUpdateSettings} className=\"space-y-6\">\n          \n          {/* SECCIÓN: PERFIL DE LA BARBERÍA */}\n          <section className=\"bg-white dark:bg-slate-900 rounded-[2.5rem] border border-slate-200 dark:border-slate-800 p-8 shadow-sm\">\n            <div className=\"flex items-center gap-3 mb-8\">\n              <div className=\"p-3 bg-blue-50 dark:bg-blue-500/10 text-blue-600 rounded-2xl\">\n                <Store size={20} />\n              </div>\n              <h3 className=\"font-black uppercase tracking-tight dark:text-white\">Perfil de la Barbería</h3>\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <div className=\"space-y-2\">\n                <label className=\"text-[10px] font-black uppercase text-slate-400 ml-2\">Nombre del Negocio</label>\n                <input \n                  type=\"text\" \n                  value={barberiaData?.nombre || \"\"}\n                  onChange={(e) => setBarberiaData({...barberiaData, nombre: e.target.value})}\n                  className=\"w-full bg-slate-50 dark:bg-slate-800 border-none rounded-2xl px-5 py-4 font-bold dark:text-white\"\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <label className=\"text-[10px] font-black uppercase text-slate-400 ml-2\">Teléfono de contacto</label>\n                <input \n                  type=\"tel\" \n                  value={barberiaData?.telefono || \"\"}\n                  onChange={(e) => setBarberiaData({...barberiaData, telefono: e.target.value})}\n                  className=\"w-full bg-slate-50 dark:bg-slate-800 border-none rounded-2xl px-5 py-4 font-bold dark:text-white\"\n                />\n              </div>\n              <div className=\"md:col-span-2 space-y-2\">\n                <label className=\"text-[10px] font-black uppercase text-slate-400 ml-2\">Dirección física</label>\n                <input \n                  type=\"text\" \n                  value={barberiaData?.direccion || \"\"}\n                  onChange={(e) => setBarberiaData({...barberiaData, direccion: e.target.value})}\n                  className=\"w-full bg-slate-50 dark:bg-slate-800 border-none rounded-2xl px-5 py-4 font-bold dark:text-white\"\n                />\n              </div>\n            </div>\n          </section>\n\n          {/* SECCIÓN: HORARIOS */}\n          <section className=\"bg-white dark:bg-slate-900 rounded-[2.5rem] border border-slate-200 dark:border-slate-800 p-8 shadow-sm\">\n            <div className=\"flex items-center gap-3 mb-8\">\n              <div className=\"p-3 bg-emerald-50 dark:bg-emerald-500/10 text-emerald-600 rounded-2xl\">\n                <Clock size={20} />\n              </div>\n              <h3 className=\"font-black uppercase tracking-tight dark:text-white\">Horario Comercial</h3>\n            </div>\n\n            <div className=\"space-y-4\">\n              {['Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes', 'Sábado', 'Domingo'].map((dia) => (\n                <div key={dia} className=\"flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-800 rounded-2xl\">\n                  <span className=\"font-bold uppercase text-xs dark:text-white w-24\">{dia}</span>\n                  <div className=\"flex items-center gap-4\">\n                    <input type=\"time\" className=\"bg-white dark:bg-slate-700 border-none rounded-lg px-3 py-1 text-sm font-bold dark:text-white\" defaultValue=\"09:00\" />\n                    <span className=\"text-slate-400 font-bold\">a</span>\n                    <input type=\"time\" className=\"bg-white dark:bg-slate-700 border-none rounded-lg px-3 py-1 text-sm font-bold dark:text-white\" defaultValue=\"20:00\" />\n                  </div>\n                </div>\n              ))}\n            </div>\n          </section>\n\n          {/* SECCIÓN: PREFERENCIAS DE RESERVA */}\n          <section className=\"bg-white dark:bg-slate-900 rounded-[2.5rem] border border-slate-200 dark:border-slate-800 p-8 shadow-sm\">\n            <div className=\"flex items-center gap-3 mb-8\">\n              <div className=\"p-3 bg-violet-50 dark:bg-violet-500/10 text-violet-600 rounded-2xl\">\n                <Bell size={20} />\n              </div>\n              <h3 className=\"font-black uppercase tracking-tight dark:text-white\">Reservas y Notificaciones</h3>\n            </div>\n\n            <div className=\"space-y-6\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"font-bold dark:text-white text-sm uppercase\">Confirmación automática WhatsApp</p>\n                  <p className=\"text-[10px] font-bold text-slate-500 uppercase\">Enviar mensaje al agendar cita rápida</p>\n                </div>\n                <div className=\"w-12 h-6 bg-blue-600 rounded-full flex items-center justify-end px-1 cursor-pointer\">\n                  <div className=\"size-4 bg-white rounded-full shadow-sm\"></div>\n                </div>\n              </div>\n              <hr className=\"border-slate-100 dark:border-slate-800\" />\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"font-bold dark:text-white text-sm uppercase\">Intervalo de turnos</p>\n                  <p className=\"text-[10px] font-bold text-slate-500 uppercase\">Tiempo predeterminado por servicio</p>\n                </div>\n                <select className=\"bg-slate-50 dark:bg-slate-800 border-none rounded-xl px-4 py-2 font-bold text-xs dark:text-white\">\n                  <option>30 minutos</option>\n                  <option>45 minutos</option>\n                  <option>60 minutos</option>\n                </select>\n              </div>\n            </div>\n          </section>\n\n          {/* BOTÓN FLOTANTE DE GUARDAR */}\n          <div className=\"sticky bottom-8 flex justify-end\">\n            <button\n              type=\"submit\"\n              disabled={saving}\n              className=\"flex items-center gap-3 bg-blue-600 hover:bg-blue-700 text-white px-10 py-5 rounded-2xl shadow-2xl shadow-blue-500/40 transition-all font-black uppercase tracking-widest text-xs disabled:opacity-50\"\n            >\n              {saving ? <Loader2 className=\"animate-spin\" size={18} /> : <Save size={18} />}\n              {saving ? \"Guardando...\" : \"Guardar Cambios\"}\n            </button>\n          </div>\n\n        </form>\n      </div>\n    </div>\n  );\n}"
        }
    ]
}