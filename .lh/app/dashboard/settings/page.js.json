{
    "sourceFile": "app/dashboard/settings/page.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 2,
            "patches": [
                {
                    "date": 1767032027388,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1767032730995,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,15 +4,15 @@\n import { useRouter } from \"next/navigation\";\n import {\n   Save,\n   Store,\n-  Clock,\n-  Bell,\n+  Mail,\n+  Phone,\n+  ShieldCheck,\n   Loader2,\n   LogOut,\n-  CreditCard,\n-  ShieldCheck,\n-  Phone,\n+  MapPin,\n+  CreditCard\n } from \"lucide-react\";\n // Firebase\n import { auth, db } from \"@/services/firebase\";\n import { onAuthStateChanged, signOut } from \"firebase/auth\";\n@@ -23,9 +23,9 @@\n   const [loading, setLoading] = useState(true);\n   const [saving, setSaving] = useState(false);\n   const [barberiaData, setBarberiaData] = useState(null);\n \n-  // --- CARGA DE DATOS REALES ---\n+  // --- CARGA DE DATOS ---\n   useEffect(() => {\n     const unsubscribe = onAuthStateChanged(auth, async (user) => {\n       if (user) {\n         try {\n@@ -34,9 +34,9 @@\n           if (docSnap.exists()) {\n             setBarberiaData(docSnap.data());\n           }\n         } catch (error) {\n-          console.error(\"Error cargando configuración:\", error);\n+          console.error(\"Error al cargar configuración:\", error);\n         } finally {\n           setLoading(false);\n         }\n       } else {\n@@ -45,23 +45,23 @@\n     });\n     return () => unsubscribe();\n   }, [router]);\n \n-  // --- GUARDAR CAMBIOS ---\n+  // --- ACTUALIZAR DATOS ---\n   const handleUpdateSettings = async (e) => {\n     e.preventDefault();\n     setSaving(true);\n     try {\n       const barberiaRef = doc(db, \"barberias\", auth.currentUser.uid);\n       await updateDoc(barberiaRef, {\n-        nombre: barberiaData.nombre,\n-        telefono: barberiaData.telefono,\n-        direccion: barberiaData.direccion,\n-        // Aquí puedes añadir más campos si los necesitas\n+        businessName: barberiaData.businessName,\n+        email: barberiaData.email,\n+        telefono: barberiaData.telefono || \"\",\n+        direccion: barberiaData.direccion || \"\",\n       });\n-      alert(\"Configuración actualizada correctamente\");\n+      alert(\"Configuración guardada con éxito\");\n     } catch (error) {\n-      alert(\"Error al guardar los cambios\");\n+      alert(\"Error al actualizar los datos.\");\n     } finally {\n       setSaving(false);\n     }\n   };\n@@ -70,188 +70,142 @@\n     await signOut(auth);\n     router.push(\"/login\");\n   };\n \n-  if (loading)\n-    return (\n-      <div className=\"h-screen flex items-center justify-center bg-white dark:bg-slate-950\">\n-        <Loader2 className=\"text-blue-600 animate-spin\" size={40} />\n-      </div>\n-    );\n+  if (loading) return (\n+    <div className=\"h-screen flex items-center justify-center bg-white dark:bg-slate-950\">\n+      <Loader2 className=\"text-blue-600 animate-spin\" size={40} />\n+    </div>\n+  );\n \n   return (\n-    <div className=\"min-h-screen bg-slate-50 dark:bg-slate-950 p-6 md:p-12 transition-colors\">\n+    <div className=\"min-h-screen bg-slate-50 dark:bg-slate-950 p-6 md:p-12\">\n       <div className=\"max-w-4xl mx-auto\">\n+        \n         {/* HEADER */}\n         <header className=\"mb-10 flex flex-col md:flex-row md:items-end justify-between gap-4\">\n           <div>\n-            <h1 className=\"text-4xl font-black uppercase tracking-tighter dark:text-white\">\n-              Configuración\n-            </h1>\n-            <p className=\"text-slate-500 font-bold uppercase text-[10px] tracking-widest mt-2\">\n-              Gestiona tu negocio y suscripción\n-            </p>\n+            <h1 className=\"text-4xl font-black uppercase tracking-tighter dark:text-white\">Ajustes</h1>\n+            <p className=\"text-slate-500 font-bold uppercase text-[10px] tracking-widest mt-2\">Configuración general del negocio</p>\n           </div>\n-          <button\n+          <button \n             onClick={handleLogout}\n-            className=\"flex items-center gap-2 text-red-500 font-black uppercase text-[10px] tracking-widest hover:bg-red-50 dark:hover:bg-red-500/10 px-6 py-3 rounded-2xl border border-red-100 dark:border-red-500/20 transition-all w-fit\"\n+            className=\"flex items-center gap-2 text-red-500 font-black uppercase text-[10px] tracking-widest hover:bg-red-50 dark:hover:bg-red-500/10 px-6 py-3 rounded-2xl border border-red-100 dark:border-red-500/20 transition-all\"\n           >\n             <LogOut size={16} /> Cerrar Sesión\n           </button>\n         </header>\n \n         <form onSubmit={handleUpdateSettings} className=\"space-y-6\">\n-          {/* SECCIÓN 1: ESTADO DE MEMBRESÍA (INFO REAL) */}\n-          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n-            <div className=\"md:col-span-2 bg-white dark:bg-slate-900 rounded-[2.5rem] border border-slate-200 dark:border-slate-800 p-8 shadow-sm\">\n-              <div className=\"flex items-center gap-3 mb-6\">\n-                <div className=\"p-3 bg-emerald-50 dark:bg-emerald-500/10 text-emerald-600 rounded-2xl\">\n-                  <ShieldCheck size={20} />\n+          \n+          {/* CARD DE MEMBRESÍA */}\n+          <div className=\"bg-white dark:bg-slate-900 rounded-[2.5rem] border border-slate-200 dark:border-slate-800 p-8 shadow-sm overflow-hidden relative\">\n+            <div className=\"relative z-10 flex flex-col md:flex-row md:items-center justify-between gap-6\">\n+              <div className=\"flex items-center gap-4\">\n+                <div className=\"p-4 bg-blue-600 text-white rounded-[1.5rem] shadow-lg shadow-blue-500/30\">\n+                  <ShieldCheck size={24} />\n                 </div>\n-                <h3 className=\"font-black uppercase tracking-tight dark:text-white\">\n-                  Estado de la Suscripción\n-                </h3>\n-              </div>\n-\n-              <div className=\"flex items-center justify-between bg-slate-50 dark:bg-slate-800/50 p-6 rounded-[1.8rem]\">\n                 <div>\n-                  <p className=\"text-[10px] font-black uppercase text-slate-400 mb-1\">\n-                    Plan Actual\n-                  </p>\n-                  <p className=\"text-2xl font-black uppercase dark:text-white leading-none\">\n-                    {barberiaData?.plan?.type || \"Gratis\"}\n-                  </p>\n+                  <p className=\"text-[10px] font-black uppercase text-slate-400\">Estado de Membresía</p>\n+                  <h2 className=\"text-2xl font-black uppercase dark:text-white leading-none mt-1\">\n+                    Plan {barberiaData?.plan?.type || \"Básico\"}\n+                  </h2>\n                 </div>\n-                <div className=\"text-right\">\n-                  <p className=\"text-[10px] font-black uppercase text-slate-400 mb-2\">\n-                    Estado\n-                  </p>\n-                  <span\n-                    className={`px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest ${\n-                      barberiaData?.plan?.status === \"active\"\n-                        ? \"bg-emerald-500 text-white shadow-lg shadow-emerald-500/30\"\n-                        : \"bg-amber-500 text-white shadow-lg shadow-amber-500/30\"\n-                    }`}\n-                  >\n-                    {barberiaData?.plan?.status === \"active\"\n-                      ? \"Activo\"\n-                      : \"Pendiente\"}\n-                  </span>\n-                </div>\n               </div>\n+              \n+              <div className=\"flex items-center gap-3 bg-slate-50 dark:bg-slate-800 p-4 rounded-2xl\">\n+                <div className={`size-3 rounded-full animate-pulse ${barberiaData?.plan?.status === 'active' ? 'bg-emerald-500' : 'bg-amber-500'}`} />\n+                <span className=\"text-xs font-black uppercase tracking-widest dark:text-white\">\n+                  {barberiaData?.plan?.status === 'active' ? 'Cuenta Activa' : 'Pago Pendiente'}\n+                </span>\n+              </div>\n             </div>\n-\n-            <div className=\"bg-blue-600 rounded-[2.5rem] p-8 text-white flex flex-col justify-center relative overflow-hidden group shadow-xl shadow-blue-500/20\">\n-              <CreditCard className=\"absolute -right-4 -bottom-4 size-32 text-white/10 group-hover:scale-110 transition-transform\" />\n-              <p className=\"text-[10px] font-black uppercase tracking-widest opacity-80 mb-2\">\n-                Próximo cobro\n-              </p>\n-              <p className=\"text-3xl font-black uppercase\">Automático</p>\n-              <button\n-                type=\"button\"\n-                className=\"mt-4 text-[10px] font-black uppercase bg-white/20 hover:bg-white/30 p-2 rounded-lg transition-colors w-fit\"\n-              >\n-                Ver Facturas\n-              </button>\n-            </div>\n+            {/* Decoración de fondo */}\n+            <CreditCard className=\"absolute -right-6 -bottom-6 size-32 text-slate-100 dark:text-slate-800/50\" />\n           </div>\n \n-          {/* SECCIÓN 2: DATOS DE LA BARBERÍA */}\n+          {/* FORMULARIO DE DATOS */}\n           <section className=\"bg-white dark:bg-slate-900 rounded-[2.5rem] border border-slate-200 dark:border-slate-800 p-8 shadow-sm\">\n             <div className=\"flex items-center gap-3 mb-8\">\n               <div className=\"p-3 bg-blue-50 dark:bg-blue-500/10 text-blue-600 rounded-2xl\">\n                 <Store size={20} />\n               </div>\n-              <h3 className=\"font-black uppercase tracking-tight dark:text-white\">\n-                Información General\n-              </h3>\n+              <h3 className=\"font-black uppercase tracking-tight dark:text-white\">Perfil Público</h3>\n             </div>\n \n             <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n+              {/* NOMBRE DE LA BARBERÍA */}\n               <div className=\"space-y-2\">\n-                <label className=\"text-[10px] font-black uppercase text-slate-400 ml-2\">\n-                  Nombre del Negocio\n-                </label>\n+                <label className=\"text-[10px] font-black uppercase text-slate-400 ml-2\">Nombre Comercial</label>\n                 <div className=\"relative\">\n-                  <Store\n-                    className=\"absolute left-5 top-1/2 -translate-y-1/2 text-slate-400\"\n-                    size={18}\n+                  <Store className=\"absolute left-5 top-1/2 -translate-y-1/2 text-slate-400\" size={18} />\n+                  <input \n+                    type=\"text\" \n+                    value={barberiaData?.businessName || \"\"}\n+                    onChange={(e) => setBarberiaData({...barberiaData, businessName: e.target.value})}\n+                    className=\"w-full bg-slate-50 dark:bg-slate-800 border-none rounded-2xl pl-12 pr-5 py-4 font-bold dark:text-white focus:ring-2 ring-blue-500 transition-all outline-none\"\n                   />\n-                  <input\n-                    type=\"text\"\n-                    value={barberiaData?.nombre || \"\"}\n-                    onChange={(e) =>\n-                      setBarberiaData({\n-                        ...barberiaData,\n-                        nombre: e.target.value,\n-                      })\n-                    }\n-                    placeholder=\"Ej. Barbería El Corte\"\n-                    className=\"w-full bg-slate-50 dark:bg-slate-800 border-none rounded-2xl pl-12 pr-5 py-4 font-bold dark:text-white focus:ring-2 ring-blue-500 transition-all\"\n+                </div>\n+              </div>\n+\n+              {/* EMAIL */}\n+              <div className=\"space-y-2\">\n+                <label className=\"text-[10px] font-black uppercase text-slate-400 ml-2\">Email de Negocio</label>\n+                <div className=\"relative\">\n+                  <Mail className=\"absolute left-5 top-1/2 -translate-y-1/2 text-slate-400\" size={18} />\n+                  <input \n+                    type=\"email\" \n+                    value={barberiaData?.email || \"\"}\n+                    onChange={(e) => setBarberiaData({...barberiaData, email: e.target.value})}\n+                    className=\"w-full bg-slate-50 dark:bg-slate-800 border-none rounded-2xl pl-12 pr-5 py-4 font-bold dark:text-white focus:ring-2 ring-blue-500 transition-all outline-none\"\n                   />\n                 </div>\n               </div>\n \n+              {/* TELÉFONO */}\n               <div className=\"space-y-2\">\n-                <label className=\"text-[10px] font-black uppercase text-slate-400 ml-2\">\n-                  Teléfono Público\n-                </label>\n+                <label className=\"text-[10px] font-black uppercase text-slate-400 ml-2\">WhatsApp / Teléfono</label>\n                 <div className=\"relative\">\n-                  <Phone\n-                    className=\"absolute left-5 top-1/2 -translate-y-1/2 text-slate-400\"\n-                    size={18}\n-                  />\n-                  <input\n-                    type=\"tel\"\n+                  <Phone className=\"absolute left-5 top-1/2 -translate-y-1/2 text-slate-400\" size={18} />\n+                  <input \n+                    type=\"tel\" \n                     value={barberiaData?.telefono || \"\"}\n-                    onChange={(e) =>\n-                      setBarberiaData({\n-                        ...barberiaData,\n-                        telefono: e.target.value,\n-                      })\n-                    }\n-                    placeholder=\"+54 11 0000-0000\"\n-                    className=\"w-full bg-slate-50 dark:bg-slate-800 border-none rounded-2xl pl-12 pr-5 py-4 font-bold dark:text-white focus:ring-2 ring-blue-500 transition-all\"\n+                    onChange={(e) => setBarberiaData({...barberiaData, telefono: e.target.value})}\n+                    className=\"w-full bg-slate-50 dark:bg-slate-800 border-none rounded-2xl pl-12 pr-5 py-4 font-bold dark:text-white focus:ring-2 ring-blue-500 transition-all outline-none\"\n                   />\n                 </div>\n               </div>\n \n-              <div className=\"md:col-span-2 space-y-2\">\n-                <label className=\"text-[10px] font-black uppercase text-slate-400 ml-2\">\n-                  Dirección Completa\n-                </label>\n-                <input\n-                  type=\"text\"\n-                  value={barberiaData?.direccion || \"\"}\n-                  onChange={(e) =>\n-                    setBarberiaData({\n-                      ...barberiaData,\n-                      direccion: e.target.value,\n-                    })\n-                  }\n-                  placeholder=\"Calle 123, Ciudad, País\"\n-                  className=\"w-full bg-slate-50 dark:bg-slate-800 border-none rounded-2xl px-5 py-4 font-bold dark:text-white focus:ring-2 ring-blue-500 transition-all\"\n-                />\n+              {/* DIRECCIÓN */}\n+              <div className=\"space-y-2\">\n+                <label className=\"text-[10px] font-black uppercase text-slate-400 ml-2\">Ubicación</label>\n+                <div className=\"relative\">\n+                  <MapPin className=\"absolute left-5 top-1/2 -translate-y-1/2 text-slate-400\" size={18} />\n+                  <input \n+                    type=\"text\" \n+                    value={barberiaData?.direccion || \"\"}\n+                    onChange={(e) => setBarberiaData({...barberiaData, direccion: e.target.value})}\n+                    placeholder=\"Calle y número, Ciudad\"\n+                    className=\"w-full bg-slate-50 dark:bg-slate-800 border-none rounded-2xl pl-12 pr-5 py-4 font-bold dark:text-white focus:ring-2 ring-blue-500 transition-all outline-none\"\n+                  />\n+                </div>\n               </div>\n             </div>\n           </section>\n \n-          {/* BOTÓN DE GUARDAR */}\n-          <div className=\"flex justify-end pt-4\">\n+          {/* BOTÓN GUARDAR */}\n+          <div className=\"flex justify-end\">\n             <button\n               type=\"submit\"\n               disabled={saving}\n               className=\"flex items-center gap-3 bg-blue-600 hover:bg-blue-700 text-white px-12 py-5 rounded-2xl shadow-2xl shadow-blue-500/40 transition-all font-black uppercase tracking-widest text-xs disabled:opacity-50\"\n             >\n-              {saving ? (\n-                <Loader2 className=\"animate-spin\" size={18} />\n-              ) : (\n-                <Save size={18} />\n-              )}\n-              {saving ? \"Guardando cambios...\" : \"Guardar Configuración\"}\n+              {saving ? <Loader2 className=\"animate-spin\" size={18} /> : <Save size={18} />}\n+              {saving ? \"Guardando...\" : \"Guardar Cambios\"}\n             </button>\n           </div>\n+\n         </form>\n       </div>\n     </div>\n   );\n-}\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1767033332323,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -11,8 +11,11 @@\n   Loader2,\n   LogOut,\n   MapPin,\n   CreditCard,\n+  Link as LinkIcon,\n+  Copy,\n+  ExternalLink\n } from \"lucide-react\";\n // Firebase\n import { auth, db } from \"@/services/firebase\";\n import { onAuthStateChanged, signOut } from \"firebase/auth\";\n@@ -23,9 +26,9 @@\n   const [loading, setLoading] = useState(true);\n   const [saving, setSaving] = useState(false);\n   const [barberiaData, setBarberiaData] = useState(null);\n \n-  // --- CARGA DE DATOS ---\n+  // --- 1. CARGA DE DATOS ---\n   useEffect(() => {\n     const unsubscribe = onAuthStateChanged(auth, async (user) => {\n       if (user) {\n         try {\n@@ -45,21 +48,21 @@\n     });\n     return () => unsubscribe();\n   }, [router]);\n \n-  // --- ACTUALIZAR DATOS ---\n+  // --- 2. ACTUALIZAR DATOS ---\n   const handleUpdateSettings = async (e) => {\n     e.preventDefault();\n     setSaving(true);\n     try {\n       const barberiaRef = doc(db, \"barberias\", auth.currentUser.uid);\n       await updateDoc(barberiaRef, {\n-        businessName: barberiaData.businessName,\n-        email: barberiaData.email,\n+        businessName: barberiaData.businessName || \"\",\n+        email: barberiaData.email || \"\",\n         telefono: barberiaData.telefono || \"\",\n         direccion: barberiaData.direccion || \"\",\n       });\n-      alert(\"Configuración guardada con éxito\");\n+      alert(\"Configuración guardada correctamente\");\n     } catch (error) {\n       alert(\"Error al actualizar los datos.\");\n     } finally {\n       setSaving(false);\n@@ -70,200 +73,183 @@\n     await signOut(auth);\n     router.push(\"/login\");\n   };\n \n-  if (loading)\n-    return (\n-      <div className=\"h-screen flex items-center justify-center bg-white dark:bg-slate-950\">\n-        <Loader2 className=\"text-blue-600 animate-spin\" size={40} />\n-      </div>\n-    );\n+  const copyToClipboard = () => {\n+    const url = `http://localhost:3000/reserva/${auth.currentUser?.uid}`;\n+    navigator.clipboard.writeText(url);\n+    alert(\"¡Link copiado al portapapeles!\");\n+  };\n \n+  if (loading) return (\n+    <div className=\"h-screen flex items-center justify-center bg-white dark:bg-slate-950\">\n+      <Loader2 className=\"text-blue-600 animate-spin\" size={40} />\n+    </div>\n+  );\n+\n   return (\n     <div className=\"min-h-screen bg-slate-50 dark:bg-slate-950 p-6 md:p-12\">\n       <div className=\"max-w-4xl mx-auto\">\n+        \n         {/* HEADER */}\n-        <header className=\"mb-10 flex flex-col md:flex-row md:items-end justify-between gap-4\">\n+        <header className=\"mb-10 flex flex-col md:flex-row md:items-end justify-between gap-6\">\n           <div>\n-            <h1 className=\"text-4xl font-black uppercase tracking-tighter dark:text-white\">\n-              Ajustes\n-            </h1>\n-            <p className=\"text-slate-500 font-bold uppercase text-[10px] tracking-widest mt-2\">\n-              Configuración general del negocio\n-            </p>\n+            <h1 className=\"text-4xl font-black uppercase tracking-tighter dark:text-white\">Ajustes</h1>\n+            <p className=\"text-slate-500 font-bold uppercase text-[10px] tracking-widest mt-2\">Gestiona tu negocio y herramientas</p>\n           </div>\n-          <button\n+          <button \n             onClick={handleLogout}\n-            className=\"flex items-center gap-2 text-red-500 font-black uppercase text-[10px] tracking-widest hover:bg-red-50 dark:hover:bg-red-500/10 px-6 py-3 rounded-2xl border border-red-100 dark:border-red-500/20 transition-all\"\n+            className=\"flex items-center gap-2 text-red-500 font-black uppercase text-[10px] tracking-widest hover:bg-red-50 dark:hover:bg-red-500/10 px-6 py-3 rounded-2xl border border-red-100 dark:border-red-500/20 transition-all w-fit\"\n           >\n             <LogOut size={16} /> Cerrar Sesión\n           </button>\n         </header>\n \n-        <form onSubmit={handleUpdateSettings} className=\"space-y-6\">\n-          {/* CARD DE MEMBRESÍA */}\n-          <div className=\"bg-white dark:bg-slate-900 rounded-[2.5rem] border border-slate-200 dark:border-slate-800 p-8 shadow-sm overflow-hidden relative\">\n+        <form onSubmit={handleUpdateSettings} className=\"space-y-6 pb-20\">\n+          \n+          {/* SECCIÓN: LINK DE AGENDA PÚBLICA */}\n+          <section className=\"bg-white dark:bg-slate-900 rounded-[2.5rem] border border-slate-200 dark:border-slate-800 p-8 shadow-sm\">\n+            <div className=\"flex items-center gap-3 mb-6\">\n+              <div className=\"p-3 bg-amber-50 dark:bg-amber-500/10 text-amber-600 rounded-2xl\">\n+                <LinkIcon size={20} />\n+              </div>\n+              <h3 className=\"font-black uppercase tracking-tight dark:text-white\">Tu Agenda Online</h3>\n+            </div>\n+            \n+            <div className=\"bg-slate-100 dark:bg-slate-800/50 p-6 rounded-[2rem] border-2 border-dashed border-slate-200 dark:border-slate-700\">\n+              <p className=\"text-[10px] font-black uppercase text-slate-500 mb-3 tracking-widest\">Link para tus clientes:</p>\n+              <div className=\"flex flex-col sm:flex-row items-center gap-3\">\n+                <div className=\"flex-1 bg-white dark:bg-slate-900 px-5 py-3 rounded-xl border border-slate-200 dark:border-slate-800 w-full overflow-hidden\">\n+                  <code className=\"text-blue-600 dark:text-blue-400 font-bold text-xs\">\n+                    http://localhost:3000/reserva/{auth.currentUser?.uid}\n+                  </code>\n+                </div>\n+                <div className=\"flex gap-2 w-full sm:w-auto\">\n+                  <button \n+                    type=\"button\"\n+                    onClick={copyToClipboard}\n+                    className=\"flex-1 flex items-center justify-center gap-2 bg-slate-900 dark:bg-white text-white dark:text-slate-900 px-6 py-3 rounded-xl font-black text-[10px] uppercase tracking-widest hover:scale-105 transition-all\"\n+                  >\n+                    <Copy size={14} /> Copiar\n+                  </button>\n+                  <a \n+                    href={`/reserva/${auth.currentUser?.uid}`}\n+                    target=\"_blank\"\n+                    className=\"p-3 bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-white rounded-xl hover:bg-blue-600 hover:text-white transition-all\"\n+                  >\n+                    <ExternalLink size={18} />\n+                  </a>\n+                </div>\n+              </div>\n+            </div>\n+          </section>\n+\n+          {/* SECCIÓN: MEMBRESÍA */}\n+          <section className=\"bg-white dark:bg-slate-900 rounded-[2.5rem] border border-slate-200 dark:border-slate-800 p-8 shadow-sm relative overflow-hidden group\">\n             <div className=\"relative z-10 flex flex-col md:flex-row md:items-center justify-between gap-6\">\n               <div className=\"flex items-center gap-4\">\n                 <div className=\"p-4 bg-blue-600 text-white rounded-[1.5rem] shadow-lg shadow-blue-500/30\">\n                   <ShieldCheck size={24} />\n                 </div>\n                 <div>\n-                  <p className=\"text-[10px] font-black uppercase text-slate-400\">\n-                    Estado de Membresía\n-                  </p>\n+                  <p className=\"text-[10px] font-black uppercase text-slate-400\">Suscripción</p>\n                   <h2 className=\"text-2xl font-black uppercase dark:text-white leading-none mt-1\">\n                     Plan {barberiaData?.plan?.type || \"Básico\"}\n                   </h2>\n                 </div>\n               </div>\n-\n-              <div className=\"flex items-center gap-3 bg-slate-50 dark:bg-slate-800 p-4 rounded-2xl\">\n-                <div\n-                  className={`size-3 rounded-full animate-pulse ${\n-                    barberiaData?.plan?.status === \"active\"\n-                      ? \"bg-emerald-500\"\n-                      : \"bg-amber-500\"\n-                  }`}\n-                />\n+              <div className=\"flex items-center gap-3 bg-slate-50 dark:bg-slate-800 p-4 rounded-2xl border border-slate-100 dark:border-slate-700\">\n+                <div className={`size-3 rounded-full animate-pulse ${barberiaData?.plan?.status === 'active' ? 'bg-emerald-500' : 'bg-amber-500'}`} />\n                 <span className=\"text-xs font-black uppercase tracking-widest dark:text-white\">\n-                  {barberiaData?.plan?.status === \"active\"\n-                    ? \"Cuenta Activa\"\n-                    : \"Pago Pendiente\"}\n+                  {barberiaData?.plan?.status === 'active' ? 'Membresía Activa' : 'Pago Pendiente'}\n                 </span>\n               </div>\n             </div>\n-            {/* Decoración de fondo */}\n-            <CreditCard className=\"absolute -right-6 -bottom-6 size-32 text-slate-100 dark:text-slate-800/50\" />\n-          </div>\n+            <CreditCard className=\"absolute -right-6 -bottom-6 size-32 text-slate-50 dark:text-slate-800/20 pointer-events-none\" />\n+          </section>\n \n-          {/* FORMULARIO DE DATOS */}\n+          {/* SECCIÓN: PERFIL */}\n           <section className=\"bg-white dark:bg-slate-900 rounded-[2.5rem] border border-slate-200 dark:border-slate-800 p-8 shadow-sm\">\n             <div className=\"flex items-center gap-3 mb-8\">\n               <div className=\"p-3 bg-blue-50 dark:bg-blue-500/10 text-blue-600 rounded-2xl\">\n                 <Store size={20} />\n               </div>\n-              <h3 className=\"font-black uppercase tracking-tight dark:text-white\">\n-                Perfil Público\n-              </h3>\n+              <h3 className=\"font-black uppercase tracking-tight dark:text-white\">Información del Negocio</h3>\n             </div>\n \n             <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n-              {/* NOMBRE DE LA BARBERÍA */}\n+              {/* BUSINESS NAME */}\n               <div className=\"space-y-2\">\n-                <label className=\"text-[10px] font-black uppercase text-slate-400 ml-2\">\n-                  Nombre Comercial\n-                </label>\n+                <label className=\"text-[10px] font-black uppercase text-slate-400 ml-2\">Nombre de la Barbería</label>\n                 <div className=\"relative\">\n-                  <Store\n-                    className=\"absolute left-5 top-1/2 -translate-y-1/2 text-slate-400\"\n-                    size={18}\n-                  />\n-                  <input\n-                    type=\"text\"\n+                  <Store className=\"absolute left-5 top-1/2 -translate-y-1/2 text-slate-400\" size={18} />\n+                  <input \n+                    type=\"text\" \n                     value={barberiaData?.businessName || \"\"}\n-                    onChange={(e) =>\n-                      setBarberiaData({\n-                        ...barberiaData,\n-                        businessName: e.target.value,\n-                      })\n-                    }\n+                    onChange={(e) => setBarberiaData({...barberiaData, businessName: e.target.value})}\n                     className=\"w-full bg-slate-50 dark:bg-slate-800 border-none rounded-2xl pl-12 pr-5 py-4 font-bold dark:text-white focus:ring-2 ring-blue-500 transition-all outline-none\"\n                   />\n                 </div>\n               </div>\n \n               {/* EMAIL */}\n               <div className=\"space-y-2\">\n-                <label className=\"text-[10px] font-black uppercase text-slate-400 ml-2\">\n-                  Email de Negocio\n-                </label>\n+                <label className=\"text-[10px] font-black uppercase text-slate-400 ml-2\">Email de Contacto</label>\n                 <div className=\"relative\">\n-                  <Mail\n-                    className=\"absolute left-5 top-1/2 -translate-y-1/2 text-slate-400\"\n-                    size={18}\n-                  />\n-                  <input\n-                    type=\"email\"\n+                  <Mail className=\"absolute left-5 top-1/2 -translate-y-1/2 text-slate-400\" size={18} />\n+                  <input \n+                    type=\"email\" \n                     value={barberiaData?.email || \"\"}\n-                    onChange={(e) =>\n-                      setBarberiaData({\n-                        ...barberiaData,\n-                        email: e.target.value,\n-                      })\n-                    }\n+                    onChange={(e) => setBarberiaData({...barberiaData, email: e.target.value})}\n                     className=\"w-full bg-slate-50 dark:bg-slate-800 border-none rounded-2xl pl-12 pr-5 py-4 font-bold dark:text-white focus:ring-2 ring-blue-500 transition-all outline-none\"\n                   />\n                 </div>\n               </div>\n \n               {/* TELÉFONO */}\n               <div className=\"space-y-2\">\n-                <label className=\"text-[10px] font-black uppercase text-slate-400 ml-2\">\n-                  WhatsApp / Teléfono\n-                </label>\n+                <label className=\"text-[10px] font-black uppercase text-slate-400 ml-2\">Teléfono / WhatsApp</label>\n                 <div className=\"relative\">\n-                  <Phone\n-                    className=\"absolute left-5 top-1/2 -translate-y-1/2 text-slate-400\"\n-                    size={18}\n-                  />\n-                  <input\n-                    type=\"tel\"\n+                  <Phone className=\"absolute left-5 top-1/2 -translate-y-1/2 text-slate-400\" size={18} />\n+                  <input \n+                    type=\"tel\" \n                     value={barberiaData?.telefono || \"\"}\n-                    onChange={(e) =>\n-                      setBarberiaData({\n-                        ...barberiaData,\n-                        telefono: e.target.value,\n-                      })\n-                    }\n+                    onChange={(e) => setBarberiaData({...barberiaData, telefono: e.target.value})}\n                     className=\"w-full bg-slate-50 dark:bg-slate-800 border-none rounded-2xl pl-12 pr-5 py-4 font-bold dark:text-white focus:ring-2 ring-blue-500 transition-all outline-none\"\n                   />\n                 </div>\n               </div>\n \n               {/* DIRECCIÓN */}\n               <div className=\"space-y-2\">\n-                <label className=\"text-[10px] font-black uppercase text-slate-400 ml-2\">\n-                  Ubicación\n-                </label>\n+                <label className=\"text-[10px] font-black uppercase text-slate-400 ml-2\">Ubicación</label>\n                 <div className=\"relative\">\n-                  <MapPin\n-                    className=\"absolute left-5 top-1/2 -translate-y-1/2 text-slate-400\"\n-                    size={18}\n-                  />\n-                  <input\n-                    type=\"text\"\n+                  <MapPin className=\"absolute left-5 top-1/2 -translate-y-1/2 text-slate-400\" size={18} />\n+                  <input \n+                    type=\"text\" \n                     value={barberiaData?.direccion || \"\"}\n-                    onChange={(e) =>\n-                      setBarberiaData({\n-                        ...barberiaData,\n-                        direccion: e.target.value,\n-                      })\n-                    }\n-                    placeholder=\"Calle y número, Ciudad\"\n+                    onChange={(e) => setBarberiaData({...barberiaData, direccion: e.target.value})}\n+                    placeholder=\"Calle 123, Ciudad\"\n                     className=\"w-full bg-slate-50 dark:bg-slate-800 border-none rounded-2xl pl-12 pr-5 py-4 font-bold dark:text-white focus:ring-2 ring-blue-500 transition-all outline-none\"\n                   />\n                 </div>\n               </div>\n             </div>\n           </section>\n \n-          {/* BOTÓN GUARDAR */}\n-          <div className=\"flex justify-end\">\n+          {/* BOTÓN FLOTANTE GUARDAR */}\n+          <div className=\"fixed bottom-8 right-8 md:right-12 z-50\">\n             <button\n               type=\"submit\"\n               disabled={saving}\n-              className=\"flex items-center gap-3 bg-blue-600 hover:bg-blue-700 text-white px-12 py-5 rounded-2xl shadow-2xl shadow-blue-500/40 transition-all font-black uppercase tracking-widest text-xs disabled:opacity-50\"\n+              className=\"flex items-center gap-3 bg-blue-600 hover:bg-blue-700 text-white px-10 py-5 rounded-3xl shadow-2xl shadow-blue-500/40 transition-all font-black uppercase tracking-widest text-xs disabled:opacity-50 active:scale-95\"\n             >\n-              {saving ? (\n-                <Loader2 className=\"animate-spin\" size={18} />\n-              ) : (\n-                <Save size={18} />\n-              )}\n-              {saving ? \"Guardando...\" : \"Guardar Cambios\"}\n+              {saving ? <Loader2 className=\"animate-spin\" size={18} /> : <Save size={18} />}\n+              {saving ? \"Guardando...\" : \"Guardar Ajustes\"}\n             </button>\n           </div>\n+\n         </form>\n       </div>\n     </div>\n   );\n-}\n+}\n\\ No newline at end of file\n"
                }
            ],
            "date": 1767032027388,
            "name": "Commit-0",
            "content": "\"use client\";\n\nimport React, { useState, useEffect } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport {\n  Save,\n  Store,\n  Clock,\n  Bell,\n  Loader2,\n  LogOut,\n  CreditCard,\n  ShieldCheck,\n  Phone,\n} from \"lucide-react\";\n// Firebase\nimport { auth, db } from \"@/services/firebase\";\nimport { onAuthStateChanged, signOut } from \"firebase/auth\";\nimport { doc, getDoc, updateDoc } from \"firebase/firestore\";\n\nexport default function SettingsPage() {\n  const router = useRouter();\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [barberiaData, setBarberiaData] = useState(null);\n\n  // --- CARGA DE DATOS REALES ---\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, async (user) => {\n      if (user) {\n        try {\n          const docRef = doc(db, \"barberias\", user.uid);\n          const docSnap = await getDoc(docRef);\n          if (docSnap.exists()) {\n            setBarberiaData(docSnap.data());\n          }\n        } catch (error) {\n          console.error(\"Error cargando configuración:\", error);\n        } finally {\n          setLoading(false);\n        }\n      } else {\n        router.push(\"/login\");\n      }\n    });\n    return () => unsubscribe();\n  }, [router]);\n\n  // --- GUARDAR CAMBIOS ---\n  const handleUpdateSettings = async (e) => {\n    e.preventDefault();\n    setSaving(true);\n    try {\n      const barberiaRef = doc(db, \"barberias\", auth.currentUser.uid);\n      await updateDoc(barberiaRef, {\n        nombre: barberiaData.nombre,\n        telefono: barberiaData.telefono,\n        direccion: barberiaData.direccion,\n        // Aquí puedes añadir más campos si los necesitas\n      });\n      alert(\"Configuración actualizada correctamente\");\n    } catch (error) {\n      alert(\"Error al guardar los cambios\");\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleLogout = async () => {\n    await signOut(auth);\n    router.push(\"/login\");\n  };\n\n  if (loading) return (\n    <div className=\"h-screen flex items-center justify-center bg-white dark:bg-slate-950\">\n      <Loader2 className=\"text-blue-600 animate-spin\" size={40} />\n    </div>\n  );\n\n  return (\n    <div className=\"min-h-screen bg-slate-50 dark:bg-slate-950 p-6 md:p-12 transition-colors\">\n      <div className=\"max-w-4xl mx-auto\">\n        \n        {/* HEADER */}\n        <header className=\"mb-10 flex flex-col md:flex-row md:items-end justify-between gap-4\">\n          <div>\n            <h1 className=\"text-4xl font-black uppercase tracking-tighter dark:text-white\">Configuración</h1>\n            <p className=\"text-slate-500 font-bold uppercase text-[10px] tracking-widest mt-2\">Gestiona tu negocio y suscripción</p>\n          </div>\n          <button \n            onClick={handleLogout}\n            className=\"flex items-center gap-2 text-red-500 font-black uppercase text-[10px] tracking-widest hover:bg-red-50 dark:hover:bg-red-500/10 px-6 py-3 rounded-2xl border border-red-100 dark:border-red-500/20 transition-all w-fit\"\n          >\n            <LogOut size={16} /> Cerrar Sesión\n          </button>\n        </header>\n\n        <form onSubmit={handleUpdateSettings} className=\"space-y-6\">\n          \n          {/* SECCIÓN 1: ESTADO DE MEMBRESÍA (INFO REAL) */}\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n            <div className=\"md:col-span-2 bg-white dark:bg-slate-900 rounded-[2.5rem] border border-slate-200 dark:border-slate-800 p-8 shadow-sm\">\n              <div className=\"flex items-center gap-3 mb-6\">\n                <div className=\"p-3 bg-emerald-50 dark:bg-emerald-500/10 text-emerald-600 rounded-2xl\">\n                  <ShieldCheck size={20} />\n                </div>\n                <h3 className=\"font-black uppercase tracking-tight dark:text-white\">Estado de la Suscripción</h3>\n              </div>\n              \n              <div className=\"flex items-center justify-between bg-slate-50 dark:bg-slate-800/50 p-6 rounded-[1.8rem]\">\n                <div>\n                  <p className=\"text-[10px] font-black uppercase text-slate-400 mb-1\">Plan Actual</p>\n                  <p className=\"text-2xl font-black uppercase dark:text-white leading-none\">\n                    {barberiaData?.plan?.type || \"Gratis\"}\n                  </p>\n                </div>\n                <div className=\"text-right\">\n                  <p className=\"text-[10px] font-black uppercase text-slate-400 mb-2\">Estado</p>\n                  <span className={`px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest ${\n                    barberiaData?.plan?.status === 'active' \n                    ? 'bg-emerald-500 text-white shadow-lg shadow-emerald-500/30' \n                    : 'bg-amber-500 text-white shadow-lg shadow-amber-500/30'\n                  }`}>\n                    {barberiaData?.plan?.status === 'active' ? 'Activo' : 'Pendiente'}\n                  </span>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"bg-blue-600 rounded-[2.5rem] p-8 text-white flex flex-col justify-center relative overflow-hidden group shadow-xl shadow-blue-500/20\">\n              <CreditCard className=\"absolute -right-4 -bottom-4 size-32 text-white/10 group-hover:scale-110 transition-transform\" />\n              <p className=\"text-[10px] font-black uppercase tracking-widest opacity-80 mb-2\">Próximo cobro</p>\n              <p className=\"text-3xl font-black uppercase\">Automático</p>\n              <button type=\"button\" className=\"mt-4 text-[10px] font-black uppercase bg-white/20 hover:bg-white/30 p-2 rounded-lg transition-colors w-fit\">\n                Ver Facturas\n              </button>\n            </div>\n          </div>\n\n          {/* SECCIÓN 2: DATOS DE LA BARBERÍA */}\n          <section className=\"bg-white dark:bg-slate-900 rounded-[2.5rem] border border-slate-200 dark:border-slate-800 p-8 shadow-sm\">\n            <div className=\"flex items-center gap-3 mb-8\">\n              <div className=\"p-3 bg-blue-50 dark:bg-blue-500/10 text-blue-600 rounded-2xl\">\n                <Store size={20} />\n              </div>\n              <h3 className=\"font-black uppercase tracking-tight dark:text-white\">Información General</h3>\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <div className=\"space-y-2\">\n                <label className=\"text-[10px] font-black uppercase text-slate-400 ml-2\">Nombre del Negocio</label>\n                <div className=\"relative\">\n                  <Store className=\"absolute left-5 top-1/2 -translate-y-1/2 text-slate-400\" size={18} />\n                  <input \n                    type=\"text\" \n                    value={barberiaData?.nombre || \"\"}\n                    onChange={(e) => setBarberiaData({...barberiaData, nombre: e.target.value})}\n                    placeholder=\"Ej. Barbería El Corte\"\n                    className=\"w-full bg-slate-50 dark:bg-slate-800 border-none rounded-2xl pl-12 pr-5 py-4 font-bold dark:text-white focus:ring-2 ring-blue-500 transition-all\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"space-y-2\">\n                <label className=\"text-[10px] font-black uppercase text-slate-400 ml-2\">Teléfono Público</label>\n                <div className=\"relative\">\n                  <Phone className=\"absolute left-5 top-1/2 -translate-y-1/2 text-slate-400\" size={18} />\n                  <input \n                    type=\"tel\" \n                    value={barberiaData?.telefono || \"\"}\n                    onChange={(e) => setBarberiaData({...barberiaData, telefono: e.target.value})}\n                    placeholder=\"+54 11 0000-0000\"\n                    className=\"w-full bg-slate-50 dark:bg-slate-800 border-none rounded-2xl pl-12 pr-5 py-4 font-bold dark:text-white focus:ring-2 ring-blue-500 transition-all\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"md:col-span-2 space-y-2\">\n                <label className=\"text-[10px] font-black uppercase text-slate-400 ml-2\">Dirección Completa</label>\n                <input \n                  type=\"text\" \n                  value={barberiaData?.direccion || \"\"}\n                  onChange={(e) => setBarberiaData({...barberiaData, direccion: e.target.value})}\n                  placeholder=\"Calle 123, Ciudad, País\"\n                  className=\"w-full bg-slate-50 dark:bg-slate-800 border-none rounded-2xl px-5 py-4 font-bold dark:text-white focus:ring-2 ring-blue-500 transition-all\"\n                />\n              </div>\n            </div>\n          </section>\n\n          {/* BOTÓN DE GUARDAR */}\n          <div className=\"flex justify-end pt-4\">\n            <button\n              type=\"submit\"\n              disabled={saving}\n              className=\"flex items-center gap-3 bg-blue-600 hover:bg-blue-700 text-white px-12 py-5 rounded-2xl shadow-2xl shadow-blue-500/40 transition-all font-black uppercase tracking-widest text-xs disabled:opacity-50\"\n            >\n              {saving ? <Loader2 className=\"animate-spin\" size={18} /> : <Save size={18} />}\n              {saving ? \"Guardando cambios...\" : \"Guardar Configuración\"}\n            </button>\n          </div>\n\n        </form>\n      </div>\n    </div>\n  );\n}"
        }
    ]
}